
<!DOCTYPE html>
<html lang="en">
        <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge"/>

        <title>Nyami - VueJs and ASP.NET Core - Part 1</title>
        <meta name="description" content="Something interesting for sure..." />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">        

        <link type="application/rss+xml" rel="alternate" title="Nyami" href="/feed.rss" />
                <link type="application/atom+xml" rel="alternate" title="Nyami" href="/feed.atom" />
        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/favicon.ico" type="image/x-icon">

        <link href="/assets/css/bootstrap.min.css" rel="stylesheet" />
        <link href="/assets/css/highlight.css" rel="stylesheet">
        <link href="/assets/css/clean-blog.css" rel="stylesheet" />
        <link href="/assets/css/master.css" rel="stylesheet" />
        <link href="/assets/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
        <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
        <link href="/assets/css/override.css" rel="stylesheet" />


        <meta name="application-name" content="Nyami" />
        <meta name="msapplication-tooltip" content="Nyami" />
        <meta name="msapplication-starturl" content="/" />

        <meta property="og:title" content="Nyami - VueJs and ASP.NET Core - Part 1" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://www.nyami.uk/posts/2019-05-10-VueWithAspNetPart1" />
        <!-- TODO: More social graph meta tags -->

        <script src="/assets/js/jquery.min.js"></script>
        <script src="/assets/js/bootstrap.min.js"></script>     
        <script src="/assets/js/highlight.pack.js"></script>   
        <script src="/assets/js/clean-blog.js"></script>
        <script src="/assets/js/d3.v3.min.js"></script>
        <script src="/assets/js/trianglify.min.js"></script>
        <script src="/assets/js/Please-compressed.js"></script>
        <script src="/assets/js/background-check.min.js"></script>
                
        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
                <script src="/assets/js/html5shiv.js"></script>
                <script src="/assets/js/respond.min.js"></script>
        <![endif]-->
        
        


        </head>
        <body>
                
                <!-- Navigation -->
                <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
                        <div class="container-fluid">
                                <!-- Brand and toggle get grouped for better mobile display -->
                                <div class="navbar-header page-scroll">
                                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse">
                                        <span class="sr-only">Toggle navigation</span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                        </button>
                                        <a class="navbar-brand" href="/">Nyami</a>
                                </div>
                        
                                <!-- Collect the nav links, forms, and other content for toggling -->
                                <div class="collapse navbar-collapse" id="navbar-collapse">
                                        <ul class="nav navbar-nav navbar-right">
                                                        <li><a href="/posts">Archive</a></li>
        <li><a href="/tags">Tags</a></li>
        <li><a href="/about">About Me</a></li>
 
                                        </ul>
                                </div>
                                <!-- /.navbar-collapse -->
                        </div>
                        <!-- /.container -->
                </nav>
                
                <!-- Page Header -->
                <header class="intro-header" id="intro-header" style="background-image: url(&quot;images/VueLogo.png&quot;)">
                        <div class="container">
                                <div class="row">
                                        <div class="col-md-12">

    
<div class="post-heading">
    <h1>VueJs and ASP.NET Core - Part 1</h1>
    <div class="meta">        
Published on Friday, May 10, 2019<br>    </div>
        <div class="tags">
                    <a role="button" href="/tags/aspnet" class="btn btn-default btn-xs">aspnet</a>
                    <a role="button" href="/tags/dotnet" class="btn btn-default btn-xs">dotnet</a>
                    <a role="button" href="/tags/VueJs" class="btn btn-default btn-xs">VueJs</a>
        </div>     
</div>
                                        </div>
                                </div>
                        </div>
                </header>
                
                <!-- Main Content -->
                <div class="container">
                        <div class="row">
                                <div id="content" class="col-md-12">
                                        

<p>Whilst it’s relatively easy to <a href="http://lmgtfy.com/?q=asp.net+core+2+with+vue">find and follow a guide</a> to get up and running with Vue and ASP.NET Core, you’ll probably find there are a number techniques, methods, and opinions and there isn’t really the ‘first class’ support and 'simple' method of getting started as there is with Angular. In the following series of posts we’ll take a look at repurposing and using some of Microsoft’s SpaServices to create better support for Vue.js within your new ASP.NET Core project.</p>
<!--more-->
<h2 id="dotnet-new-angular">dotnet new angular</h2>
<p>Before we get started creating our own stuff for Vue lets look at creating an Angular project using the <a href="https://www.nuget.org/packages/Microsoft.DotNet.Web.Spa.ProjectTemplates/">Microsoft's template</a> and see what it gives us.</p>
<p>Assuming you have the <a href="https://dotnet.microsoft.com/download">.NET Core SDK</a> installed (tested with 2.2), at a location of your choosing, drop to your preferred terminal and type <code>dotnet new angular</code>. We now have a fairly sparse, and if you've worked with ASP.NET, familiar, project created. Let's break it down a little:</p>
<ul>
<li>ClientApp folder - a Hello World Angular app</li>
<li>Controllers folder - contains a simple api to 'fetch' weather data</li>
<li>Pages folder - not much here, just the Error page (MVC)</li>
<li>Properties folder - launchsettings used for debug/development</li>
<li>wwwroot folder - static assets for the side</li>
<li>appsettings.json - application setting, appsettings.development.json allows for development time settings</li>
<li>Foo.csproj - the aspnet project file, more information below</li>
<li>Program.cs - application entry point</li>
<li>Startup.cs - Configures services and application request pipeline</li>
</ul>
<p>If you want to learn more about ASP.NET Core apps the <a href="https://docs.microsoft.com/en-us/aspnet/core/fundamentals/?view=aspnetcore-2.2">official documentation</a> is the best place to head.</p>
<h2 id="startup.cs">Startup.cs</h2>
<p>As with most ASP.NET applications the magic is coordinated in Startup.cs, there are typically two main parts, <code>ConfigureServices</code>, where we configure and register services required by our application, and <code>Configure</code>, where we configure the request handling pipeline. If you open Startup.cs you'll see the template has added some SPA related code to each of these methods.</p>
<p>In the first block of code, as well as adding MVC configuration, it adds configuration telling the middleware where to expect to find the files for the SPA application.</p>
<pre><code class="language-csharp">// This method gets called by the runtime. Use this method to add services to the container.
public void ConfigureServices(IServiceCollection services)
    {
    services.AddMvc().SetCompatibilityVersion(CompatibilityVersion.Version_2_2);

    // In production, the Angular files will be served from this directory
    services.AddSpaStaticFiles(configuration =&gt;
    {
        configuration.RootPath = &quot;ClientApp/dist&quot;;
    });
}
</code></pre>
<p>In this next block we can see there are two points of interest for our application, <code>app.UseSpaStaticFiles()</code>, which uses the configuration above to serve the static files for the SPA and <code>app.UseSpa</code> which will return the default SPA page for any unhandled requests, its important this is the last middleware in our pipeline as it essentially acts as a 'catch all' on the assumption the route will be matched by our client side app. You can also see that when in development there is a call <code>spa.UseAngularCliServer(npmScript: &quot;start&quot;)</code>, this will call the npm script specified, wait for it to start successfully, and will 'proxy' calls in to the webpack web server started, and is what we'll go on to replicate for our Vue implementaion.</p>
<pre><code class="language-csharp">public void Configure(IApplicationBuilder app, IHostingEnvironment env)
{
    // Code removed for brevity

    app.UseSpaStaticFiles();

    app.UseMvc(routes =&gt; {
        //Code removed for brevity
    });

    app.UseSpa(spa =&gt;
    {
        // To learn more about options for serving an Angular SPA from ASP.NET Core,
        // see https://go.microsoft.com/fwlink/?linkid=864501

        spa.Options.SourcePath = &quot;ClientApp&quot;;

        if (env.IsDevelopment())
        {
            spa.UseAngularCliServer(npmScript: &quot;start&quot;);
        }
    });
}
</code></pre>
<h2 id="csproj-file">.csproj file</h2>
<p>The project file has a couple of extra targets when compared to a vanilla MVC project file, these are used to assert that npm has been installed when the project is being built and another target is used to add our Angular application to the published output. The project also ensures the ClientApp folder is not handled as part of the default build and publish behaviour.</p>
<h2 id="but-what-about-vue">But what about Vue?</h2>
<p>Looking at what Microsoft's template provides this is the exact experience we are hoping to achieve but for Vue. There are really two parts to the Angular and ASP.NET Core story, the SPA middleware that hooks up Webpack at development time and serves the SPA’s static files, and the template getting us up and running ensuring a consistent experience. In the next part we'll take a look at the middleware and see how far it can take us for Vue.</p>
<p><a href="/posts/2019-05-21-VueWithAspNetPart2">Part 2</a></p>



                                </div>
                        </div>
                </div>
                
                <hr>
                
                <!-- Footer -->
                <footer>
                        <div class="container">
    <div class="row">
        <div class="col-md-12">
            <ul class="list-inline text-center">
                <li>
                    <a href="https://twitter.com/nyami">
                        <span class="fa-stack fa-lg">
                            <i class="fa fa-circle fa-stack-2x"></i>
                            <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                        </span>
                    </a>
                </li>
                <li>
                    <a href="https://www.linkedin.com/in/nyami/">
                        <span class="fa-stack fa-lg">
                            <i class="fa fa-circle fa-stack-2x"></i>
                            <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                        </span>
                    </a>
                </li>
            </ul>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12 text-center">
            <p class="copyright text-muted">
                Copyright © 2019<br>
                <a href="/feed.rss"><i class="fa fa-rss"></i> RSS Feed</a>
                |
                <a href="/feed.atom"><i class="fa fa-rss"></i> Atom Feed</a><br>
                <strong><a href="https://wyam.io">Generated by Wyam</a></strong>
            </p>
        </div>
    </div>
</div>

                </footer> 

                <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-57354598-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-57354598-1');
</script>

                <script>hljs.initHighlightingOnLoad();</script>


                <script>
                        BackgroundCheck.init({
                                targets: '.intro-header,.navbar',
                                images: '.intro-header'
                        });
                </script>
        </body>
</html>

